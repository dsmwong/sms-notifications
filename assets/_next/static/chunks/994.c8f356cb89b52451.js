"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[994],{8994:function(e,n,t){t.r(n);var a=t(7568),s=t(828),o=t(655),i=t(5893),r=t(6562),l=t(3574),c=t(5152),d=t.n(c),h=t(7294),u=t(9669),g=t.n(u),p=t(8552),f=d()(Promise.resolve().then(t.t.bind(t,6562,23)).then((function(e){return e.Callout})),{loadableGenerated:{webpack:function(){return[6562]}},ssr:!1}),m=d()(t.e(920).then(t.bind(t,920)).then((function(e){return e.default})),{loadableGenerated:{webpack:function(){return[920]}},ssr:!1}),b=d()(t.e(341).then(t.t.bind(t,7341,23)).then((function(e){return e.MinusIcon})),{loadableGenerated:{webpack:function(){return[7341]}},ssr:!1}),w=(d()(t.e(724).then(t.t.bind(t,3724,23)).then((function(e){return e.ClearIcon})),{loadableGenerated:{webpack:function(){return[3724]}},ssr:!1}),d()(t.e(90).then(t.t.bind(t,4090,23)).then((function(e){return e.LoadingIcon})),{loadableGenerated:{webpack:function(){return[4090]}},ssr:!1}));n.default=function(e){var n=(0,h.useState)(!1),t=n[0],c=n[1],d=(0,s.Z)(h.useState(!1),2),u=d[0],S=d[1],x=(0,h.useState)([]),v=x[0],j=x[1],A=(0,h.useState)(!1),y=A[0],k=A[1],P=(0,h.useState)([]),C=P[0],I=P[1],D=function(){var e=(0,a.Z)((function(){var e;return(0,o.__generator)(this,(function(n){switch(n.label){case 0:return c(!0),S(!0),"http://localhost:3001",console.log("Requesting message list"),e=[],[4,g().post("http://localhost:3001/api/list").then((function(n){console.log("API response",n),n.data.map((function(n,t){var a=[];a[0]=n.sid,a[1]=n.to,a[2]=n.body,a[3]=new Date(n.dateCreated).toLocaleString(),a[4]=n.numSegments,e.push(a)}))})).finally((function(){j(e),c(!1),S(!1),console.log("End of API request")}))];case 1:return n.sent(),[2]}}))}));return function(){return e.apply(this,arguments)}}(),G=function(){var e=(0,a.Z)((function(){var e,n;return(0,o.__generator)(this,(function(t){switch(t.label){case 0:return console.log("Un-scheduling messages"),c(!0),S(!0),e=[],C.map((function(n,t){1==n&&e.push(v[t][0])})),"http://localhost:3001",console.log("Posting messages to API",JSON.stringify(e,null,2)),n={},[4,g().post("http://localhost:3001/api/cancel",(n.sids=e,n)).then((function(e){console.log("API response",e)})).finally((function(){D()}))];case 1:return t.sent(),[2]}}))}));return function(){return e.apply(this,arguments)}}();return(0,i.jsx)(r.TabPanel,{id:e.tabId,children:(0,i.jsxs)(r.Card,{children:[(0,i.jsx)(r.Heading,{variant:"heading30",as:"h2",children:"Scheduled Messages"}),t&&(0,i.jsxs)(r.Box,{marginBottom:"space40",marginTop:"space40",children:[" ",(0,i.jsx)(l.Z,{headers:p.wg})]}),!t&&v&&v.length>0&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(f,{variant:"success",children:[(0,i.jsx)(r.CalloutHeading,{as:"h6",children:"Scheduled Messages"}),(0,i.jsx)(r.CalloutText,{children:"Messages in this list are scheduled for delivery. Choose one or more messages to cancel, or removed all of them at once."})]}),(0,i.jsx)(m,{headers:p.wg,data:v,handleCheckedItems:function(e){console.log("We have checked items: ",e),I(e);var n=!1;C.map((function(e,t){console.log(" Checking items idx ".concat(t," it is: ").concat(e)),1==e&&(n=!0)})),console.log("Any item checked: ".concat(n)),k(n)}})]}),!t&&!v||0==v.length&&(0,i.jsx)(r.Paragraph,{children:"No data to display"}),(0,i.jsxs)(r.Stack,{orientation:"horizontal",spacing:"space30",children:[(0,i.jsxs)(r.Button,{as:"button",variant:"primary",onClick:D,disabled:u||t,children:[u&&(0,i.jsx)(r.Spinner,{decorative:!1,title:"Saving",size:"sizeIcon20"}),!u&&(0,i.jsx)(w,{decorative:!1,size:"sizeIcon10",title:"Refresh"}),"Refresh"]}),(0,i.jsxs)(r.Button,{as:"button",variant:"destructive",disabled:!y||u||t,onClick:G,children:[(0,i.jsx)(b,{decorative:!1,size:"sizeIcon10",title:"Clear all messages"}),"Unschedule and Delete"]})]})]})})}},3574:function(e,n,t){var a=t(5893),s=(t(7294),t(1227)),o=t(1967),i=t(8552);n.Z=function(e){var n=[67,53,79,59,73,61,89,97,71,83],t=n.length;return(0,a.jsxs)(o.DataGrid,{"aria-label":"User information table",children:[(0,a.jsx)(o.DataGridHead,{children:(0,a.jsx)(o.DataGridRow,{children:e.headers.map((function(e){return(0,a.jsx)(o.DataGridHeader,{children:e},e)}))})}),(0,a.jsx)(o.DataGridBody,{children:i.pS.map((function(e,i){return(0,a.jsx)(o.DataGridRow,{children:e.map((function(e,r){return(0,a.jsx)(o.DataGridCell,{children:(0,a.jsx)(s.SkeletonLoader,{width:"".concat(n[(i+r)%t],"%")})},"col-".concat(r))}))},"row-".concat(i))}))})]})}},8552:function(e,n,t){t.d(n,{N9:function(){return a},pS:function(){return o},wg:function(){return s}});var a=["Phone","Message","Scheduled Date Time (Local)"],s=["SID","To","Message","Creation Date Time (Local)","Segments"],o=[["+61467601932","A message to be delivered via SMS","ASAP","ASAP"],["+61467601932","A message to be delivered via SMS, this one is really long and should take a while to read. No really, spend more than a few seconds reading this message, it contains an example web page too http://www.example.com","ASAP","ASAP"],["+61467601932","A message to be delivered via SMS, this one is really long and should take a while to read. No really, spend more than a few seconds reading this message, it contains an example web page too http://www.example.com. Oh did I mention that there is the ability to do \ud83d\udca5 Unicode characters too! \ud83d\ude07\ud83d\ude3b\ud83e\udef6, please enjoy this \ud83d\udc25","ASAP","ASAP"],["+61467601931","A message to be delivered via SMS, this one is really long and should take a while to read. No really, spend more than a few seconds reading this message, it contains an example web page too http://www.example.com. Oh did I mention that there is the ability to do \ud83d\udca5 Unicode characters too! \ud83d\ude07\ud83d\ude3b\ud83e\udef6, please enjoy this \ud83d\udc25","ASAP","ASAP"]]}}]);